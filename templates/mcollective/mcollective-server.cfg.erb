topicprefix = /topic/
main_collective = mcollective
collectives = mcollective
libdir = <%= scope.lookupvar('::openshift_origin::params::ruby_scl_path_prefix') %>/usr/libexec/mcollective
logfile = /var/log/mcollective.log
loglevel = debug
daemonize = <%= scope.lookupvar('::operatingsystem') == "Fedora" ? '0' : '1'%>
direct_addressing = 1
registerinterval = 30

# Plugins
securityprovider = psk
plugin.psk = unset

<%
require 'uri'
amqp_url = scope.lookupvar('::openshift_freequant::node_amqp_url')
amqp_uri = URI.parse(amqp_url)
%>
connector = amqp
plugin.amqp.host = <%= amqp_uri.host %>
plugin.amqp.port = <%= amqp_uri.port %>
plugin.amqp.user = <%= amqp_uri.user %>
plugin.amqp.password = <%= amqp_uri.password %>
plugin.amqp.vhost = <%= amqp_uri.path %>
<% end %>

# Facts
factsource = yaml
plugin.yaml = <%= scope.lookupvar('::openshift_origin::params::ruby_scl_path_prefix') %>/etc/mcollective/facts.yaml
